<!DOCTYPE html>
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html" 
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"> 

    <h:head>  
        <ui:include src="head.xhtml" />
        <title>Login with GitHub</title>        
        <script type="text/javascript" src="js/javascripts.js" /> 
        <h:outputStylesheet library="webjars" name="primeflex/3.2.1/primeflex.min.css" />       
        <link rel="stylesheet" type="text/css" href="css/main.css" />   
    </h:head>
    <h:body id="appBody">

        <h:form id="appForm">

            <h:commandButton value="Login with GitHub" action="#{systemManager.redirectToGitHub}" />

            <f:event type="preRenderView" listener="#{systemManager.handleGitHubCallback}"/>
            <h:outputText value="Processing GitHub authentication..."/>

            <h:outputText value="Welcome, #{sessionScope.username}"/>
            <h:graphicImage value="#{sessionScope.avatarUrl}" width="100" height="100"/>
            
        </h:form> 

    </h:body>
</html>